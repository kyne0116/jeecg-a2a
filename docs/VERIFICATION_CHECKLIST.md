# JEECG A2A Platform ä¿®å¤éªŒè¯æ¸…å•

## ğŸ” é—®é¢˜éªŒè¯æ­¥éª¤

### 1. é‡å¤æŒ‰é’®é—®é¢˜éªŒè¯

**æµ‹è¯•æ­¥éª¤ï¼š**
1. å¯åŠ¨å¹³å°ï¼š`python3 main.py`
2. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:6000`
3. åœ¨èŠå¤©ç•Œé¢å‘é€æ¶ˆæ¯ï¼š"ä»‹ç»ä¸€ä¸‹ä½ èƒ½å¹²ä»€ä¹ˆ"
4. è§‚å¯ŸèŠå¤©çª—å£ä¸­çš„å“åº”

**é¢„æœŸç»“æœï¼š**
- âœ… ä¸åº”è¯¥å‡ºç°é‡å¤çš„è“è‰²æŒ‰é’®
- âœ… æ¯æ¡æ¶ˆæ¯åªæ˜¾ç¤ºä¸€æ¬¡
- âœ… æ§åˆ¶å°æ˜¾ç¤º "Duplicate message prevented" æ—¥å¿—ï¼ˆå¦‚æœæœ‰é‡å¤å°è¯•ï¼‰

**å¦‚æœä»æœ‰é—®é¢˜ï¼š**
- æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°é”™è¯¯
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°é¡µé¢
- æ£€æŸ¥Agentå“åº”æ˜¯å¦åŒ…å«HTMLä»£ç 

### 2. Agentå“åº”çŠ¶æ€éªŒè¯

**æµ‹è¯•æ­¥éª¤ï¼š**
1. å‘é€ä»»æ„æ¶ˆæ¯
2. è§‚å¯Ÿ"Agent is typing..."æŒ‡ç¤ºå™¨
3. ç­‰å¾…Agentå“åº”

**é¢„æœŸç»“æœï¼š**
- âœ… å‘é€æ¶ˆæ¯åç«‹å³æ˜¾ç¤º"Agent is typing..."
- âœ… æ”¶åˆ°Agentå“åº”åæŒ‡ç¤ºå™¨æ¶ˆå¤±
- âœ… å¦‚æœ30ç§’å†…æ— å“åº”ï¼ŒæŒ‡ç¤ºå™¨è‡ªåŠ¨æ¶ˆå¤±
- âœ… ä¸ä¼šå‡ºç°å¡ä½çš„typingæŒ‡ç¤ºå™¨

### 3. JSONåºåˆ—åŒ–é”™è¯¯éªŒè¯

**æµ‹è¯•æ­¥éª¤ï¼š**
1. æŸ¥çœ‹åå°æ—¥å¿—ï¼š`tail -f logs/platform.log`
2. å‘é€æ¶ˆæ¯å¹¶è§‚å¯Ÿæ—¥å¿—è¾“å‡º

**é¢„æœŸç»“æœï¼š**
- âœ… ä¸åº”è¯¥å‡ºç° "Object of type datetime is not JSON serializable" é”™è¯¯
- âœ… WebSocketæ¶ˆæ¯æ­£å¸¸å‘é€å’Œæ¥æ”¶
- âœ… ä»»åŠ¡çŠ¶æ€æ›´æ–°æ­£å¸¸

### 4. ä»£ç†å¯ç”¨æ€§éªŒè¯

**æµ‹è¯•æ­¥éª¤ï¼š**
1. ç‚¹å‡»"æ£€æŸ¥ä»£ç†çŠ¶æ€"æŒ‰é’®
2. è§‚å¯Ÿç³»ç»Ÿå“åº”

**é¢„æœŸç»“æœï¼š**
- âœ… å¦‚æœæœ‰ä»£ç†ï¼šæ˜¾ç¤ºä»£ç†åˆ—è¡¨å’ŒçŠ¶æ€
- âœ… å¦‚æœæ— ä»£ç†ï¼šæ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤ºå’Œè§£å†³å»ºè®®
- âœ… ç³»ç»Ÿå°è¯•è‡ªåŠ¨æ³¨å†Œé»˜è®¤ä»£ç†

## ğŸ› ï¸ æŠ€æœ¯éªŒè¯

### å‰ç«¯éªŒè¯

**æ£€æŸ¥é¡¹ç›®ï¼š**
- [ ] `addMessage` å‡½æ•°ä½¿ç”¨ `textContent` è€Œé `innerHTML`
- [ ] æ¶ˆæ¯å»é‡é€»è¾‘æ­£å¸¸å·¥ä½œ
- [ ] æ²¡æœ‰é‡å¤çš„ `case 'system':` å¤„ç†
- [ ] å†…å­˜æ¸…ç†æœºåˆ¶æ­£å¸¸å·¥ä½œ

**éªŒè¯å‘½ä»¤ï¼š**
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
console.log('Displayed messages count:', displayedMessages.size);
console.log('Max tracked messages:', MAX_TRACKED_MESSAGES);
```

### åç«¯éªŒè¯

**æ£€æŸ¥é¡¹ç›®ï¼š**
- [ ] `serialize_for_json` å‡½æ•°æ­£ç¡®å¤„ç†datetime
- [ ] WebSocketæ¶ˆæ¯å‘é€ä½¿ç”¨åºåˆ—åŒ–å‡½æ•°
- [ ] ä»£ç†æ³¨å†Œé€»è¾‘æ­£å¸¸å·¥ä½œ
- [ ] ä»»åŠ¡ç›‘æ§ä¸é‡å¤å‘é€æ¶ˆæ¯

**éªŒè¯å‘½ä»¤ï¼š**
```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep python3

# æ£€æŸ¥ç«¯å£
netstat -an | grep 6000
netstat -an | grep 8888

# æ£€æŸ¥æ—¥å¿—
tail -20 logs/platform.log
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¦‚æœé‡å¤æŒ‰é’®ä»ç„¶å‡ºç°ï¼š

1. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼š**
   - Chrome: Ctrl+Shift+R (å¼ºåˆ¶åˆ·æ–°)
   - Firefox: Ctrl+F5
   - Safari: Cmd+Option+R

2. **æ£€æŸ¥Agentå“åº”å†…å®¹ï¼š**
   ```bash
   # æŸ¥çœ‹WebSocketæ¶ˆæ¯
   # åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Networkæ ‡ç­¾ä¸­æŸ¥çœ‹WebSocketè¿æ¥
   ```

3. **é‡å¯æœåŠ¡ï¼š**
   ```bash
   pkill -f "python3.*main.py"
   python3 main.py
   ```

### å¦‚æœtypingæŒ‡ç¤ºå™¨å¡ä½ï¼š

1. **æ£€æŸ¥WebSocketè¿æ¥ï¼š**
   - æµè§ˆå™¨å¼€å‘è€…å·¥å…· > Network > WS
   - ç¡®è®¤è¿æ¥çŠ¶æ€ä¸º "101 Switching Protocols"

2. **æ£€æŸ¥ä»»åŠ¡çŠ¶æ€ï¼š**
   ```bash
   curl http://localhost:6000/api/tasks
   ```

### å¦‚æœä»æœ‰JSONåºåˆ—åŒ–é”™è¯¯ï¼š

1. **æ£€æŸ¥datetimeå¤„ç†ï¼š**
   ```python
   # åœ¨Pythonæ§åˆ¶å°æµ‹è¯•
   from api.routes.websocket import serialize_for_json
   from datetime import datetime
   test_data = {"time": datetime.now()}
   print(serialize_for_json(test_data))
   ```

## âœ… æˆåŠŸæ ‡å‡†

**ç³»ç»Ÿè¢«è®¤ä¸ºä¿®å¤æˆåŠŸå½“ï¼š**
- [ ] èŠå¤©ç•Œé¢ä¸å‡ºç°é‡å¤æŒ‰é’®
- [ ] TypingæŒ‡ç¤ºå™¨æ­£å¸¸å·¥ä½œ
- [ ] åå°æ— JSONåºåˆ—åŒ–é”™è¯¯
- [ ] ä»£ç†çŠ¶æ€æ£€æŸ¥æ­£å¸¸å·¥ä½œ
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š`python3 tests/test_chat_fixes.py`

## ğŸ“ è·å–æ”¯æŒ

å¦‚æœéªŒè¯å¤±è´¥ï¼Œè¯·æä¾›ï¼š
1. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯æˆªå›¾
2. åå°æ—¥å¿—æ–‡ä»¶
3. å…·ä½“çš„é‡ç°æ­¥éª¤
4. ç³»ç»Ÿç¯å¢ƒä¿¡æ¯ï¼ˆPythonç‰ˆæœ¬ã€æµè§ˆå™¨ç‰ˆæœ¬ç­‰ï¼‰
